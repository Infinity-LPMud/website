---
import PageSection from "./PageSection.astro";
import fs from "node:fs";
import path from "node:path";

let topPlayerName = "";
try {
  const dataPath = path.join(process.cwd(), "public/data/SORT_LEVEL.json");
  const data = JSON.parse(fs.readFileSync(dataPath, "utf-8"));
  if (data.length > 0 && data[0].Name) {
    topPlayerName = data[0].Name;
  }
} catch {
  topPlayerName = "";
}
---

<PageSection title="Top Player">
  {topPlayerName && (
    <>
      Congratulations to <span class="text-2xl font-bold text-[#f0c050]">{topPlayerName}</span>,
    </>
  )}
  {!topPlayerName && <>The</>}
  Infinity's current top player! Infinity's top players are ranked by a variety
  of factors including experience points, level, and wizard quests solved. To
  see the full list of top players, visit
  <a href="/top-players" style="font-weight:bold">Infinity's Top Players</a>.
  The number one spot is a coveted position, but can change at any time.
</PageSection>
